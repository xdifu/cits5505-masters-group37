{% extends "base.html" %}
{% import "bootstrap_wtf.html" as wtf %}

{% block title %}Share Analysis - Sentiment Analyzer{% endblock %}

{% block content %}
<div class="analyze-section py-5">
  <!-- Page title -->
  <h1 class="mb-5 display-5 cyberpunk-title text-center" data-text="Share Analysis Result">
    Share Analysis Result
  </h1>

  <!-- Two-column layout with gutter -->
  <div class="row g-5 justify-content-center">
    
    <!-- Left column: Analysis Details -->
    <div class="col-12 col-md-6">
      <div class="card tilt-card shadow-sm border-0">
        <!-- Card header -->
        <div class="card-header bg-white border-bottom-0">
          <h5 class="card-title mb-0">Analysis Details</h5>
        </div>
        <!-- Card body -->
        <div class="card-body p-3">
          <p class="mb-3"><strong>Sentiment:</strong>
            {% if report.sentiment == 'Positive' %}
              <span class="badge bg-success">{{ report.sentiment }}</span>
            {% elif report.sentiment == 'Negative' %}
              <span class="badge bg-danger">{{ report.sentiment }}</span>
            {% else %}
              <span class="badge bg-secondary">{{ report.sentiment }}</span>
            {% endif %}
          </p>
          <p class="mb-3"><strong>Original Text:</strong><br>{{ report.original_text }}</p>
          <p class="text-muted"><small>Analyzed on: {{ report.timestamp.strftime('%Y-%m-%d %H:%M') }}</small></p>
        </div>
      </div>
    </div>

    <!-- Right column: Share Form + Tips -->
    <div class="col-12 col-md-6 d-flex flex-column">
      <!-- Share form card -->
      <div class="card tilt-card shadow-sm border-0 flex-grow-1">
        <div class="card-header bg-white border-bottom-0">
          <h5 class="card-title mb-0">Share with another user</h5>
        </div>
        <div class="card-body p-3">
          <form method="POST" action="{{ url_for('main.share_report', report_id=report.id) }}" novalidate>
            {{ form.hidden_tag() }}
            <!-- Username input -->
            <div class="mb-4">
              {{ wtf.form_field(form.share_with_username, class='form-control form-control-lg', placeholder='Enter username') }}
            </div>
            <!-- Button group -->
            <div class="d-flex gap-3">
              {{ wtf.form_field(form.submit, class='btn btn-cyber-primary flex-grow-1') }}
              <a href="{{ url_for('main.results') }}" class="btn btn-outline-secondary flex-grow-1">Back to My Results</a>
            </div>
          </form>
        </div>
      </div>

      <!-- Sharing tips card -->
      <div class="card tilt-card shadow-sm border-0 mt-4 flex-grow-1">
        <div class="card-header bg-white border-bottom-0">
          <h5 class="card-title mb-0">Sharing Tips</h5>
        </div>
        <div class="card-body p-3">
          <ul class="list-unstyled mb-0 ps-3">
            <li class="mb-2 d-flex align-items-start">
              <span class="me-2 text-success mt-1">&check;</span>
              <span>The recipient will see your username as the sharer</span>
            </li>
            <li class="mb-2 d-flex align-items-start">
              <span class="me-2 text-success mt-1">&check;</span>
              <span>You can share with multiple users individually</span>
            </li>
            <li class="mb-2 d-flex align-items-start">
              <span class="me-2 text-success mt-1">&check;</span>
              <span>For batch sharing, use the “Manage Sharing” option</span>
            </li>
            <li class="d-flex align-items-start">
              <span class="me-2 text-success mt-1">&check;</span>
              <span>You can revoke sharing permissions at any time</span>
            </li>
          </ul>
        </div>
      </div>
    </div>

  </div>
</div>
{% endblock %}
